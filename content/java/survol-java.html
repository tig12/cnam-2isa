<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>Survol java | NFP121 Millau</title>
    <meta name="description" content="Syntaxe java non-objet : unités syntaxiques, types primitifs">
    <meta name="robots" content="index,follow">
    <link href="../../static/cnam-2isa.css" rel="stylesheet" type="text/css">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.rights" content="Creative commons by-sa 4.0">
    <meta name="dcterms.rightsHolder" content="Thierry Graff">
    <meta name="dcterms.dateCopyrighted" content="2021">
</head>
<body>

<nav class="prevnext">
    <a class="top" title="Cours CNAM" href="../../index.html">&uarr;</a>
    <!-- 
    <a class="prev" title="Previous" href="outils-java.html">&larr;</a>
    <a class="next" title="Next" href="tableaux.html">&rarr;</a>
    -->
</nav>

<header>
<h1>Un survol de java</h1>
</header>

<article>
<nav class="toc">
    <ul>
        <li>
            <a href="#un-premier-programme-java">Un premier programme java</a>
            <ul>
                <li><a href="#1-1-execution">Exécution</a></li>
            </ul>
        </li>
        <li>
            <a href="#manipuler-des-variables">Manipuler des variables</a>
        </li>
        <li>
            <a href="#effectuer-des-tests">Effectuer des tests</a>
        </li>
        <li>
            <a href="#ecrire-des-boucles">Ecrire des boucles</a>
            <ul>
                <li><a href="#4-1-break">break</a></li>
                <li><a href="#4-2-continue">continue</a></li>
            </ul>
        </li>
        <li>
            <a href="#creer-et-appeler-des-methodes">Créer et appeler des méthodes</a>
        </li>
        <li>
            <a href="#utiliser-des-tableaux">Utiliser des tableaux</a>
        </li>
        <li>
            <a href="#creer-des-objets">Créer des objets</a>
            <ul>
                <li><a href="#7-1-membres-de-classe">Membres de classe</a></li>
                <li><a href="#7-2-variable-de-classe">Variable de classe</a></li>
                <li><a href="#7-3-objets">Objets</a></li>
                <li><a href="#7-4-constructeur-mot-cle-new">Constructeur, mot-clé new</a></li>
                <li><a href="#7-5-mot-cle-this">Mot-clé this</a></li>
                <li><a href="#7-6-visibilite">Visibilité</a></li>
                <li><a href="#7-7-getters-setters">Getters, setters</a></li>
            </ul>
        </li>
        <li>
            <a href="#travailler-avec-des-packages">Travailler avec des packages</a>
        </li>
    </ul>
</nav>



<div class="intro">
Cette page propose une première approche de java, sans être exhaustif.
</div>

<!-- ********************************************************************************* -->
<h2><a name="un-premier-programme-java">Un premier programme java</a></h2>
Un programme java est constitué de <b>classes</b>, par exemple :

<pre>
/** 
    Premier exemple
**/
public class HelloWorld {

    /**
        Point d'entrée du programme
        @param  args Tableau de chaînes passé au programme
    **/
    public static void main(String[] args) {
        System.out.println("Hello World!"); // Affiche une chaîne de caractères
    }
}
</pre>

Ce code contient plusieurs choses :

<ul class="spaced">
    <li>
        <b>Des commentaires</b>, qui peuvent être de plusieurs types :
        <ul>
            <li><b>Multiligne</b> : texte situé entre <code>/*</code> et <code>*/</code></li>
            <li><b>"Doc comments"</b> : texte situé entre <code>/**</code> et <code>*/</code></li>
            <li><b>Simple ligne</b> : texte situé après <code>//</code></li>
        </ul>
    </li>
    
    <li>
        <b>La définition d'une classe</b>, avec l'instruction <code>public class HelloWorld</code>.
        <br>Par convention, les noms de classe commencent par une majuscule (mais ce n'est pas obligatoire).
        <br>Le corps de la classe est contenu entre les accolades.
    </li>
    
    <li>
        <b>La définition d'une méthode (ou fonction)</b> : <code>public static void main(String[] args)</code>
        <br>Par convention, les noms de méthodes commencent par une minuscule (mais ce n'est pas obligatoire).
        <br>La méthode <code>public static void main(String[] args)</code> est particulière, car elle a une <b>signature</b> bien précise, qui indique le <b>point d'entrée</b> d'un programme.
    </li>
    
    <li>
        <b>Une instruction</b>, <code>System.out.println("Hello World!");</code>, qui ordonne à java d'afficher une chaîne de caractère.
    </li>
    
</ul>

C'est à l'intérieur des méthodes qu'on écrit le code java qui va être exécuté. Un programme java va être une suite d'instructions, qui vont être exécutées séquentiellement (l'une après l'autre).

<br><br>A retenir :
<ul>
    <li>
        Tout programme java doit contenir au moins une classe qui a une fonction <code>main()</code>, qui va être exécutée.
    </li>
    <li>
        Le nom du fichier doit obligatoirement correspondre au nom de la classe.
        <br>La classe <code>HelloWorld</code> doit donc se trouver dans un fichier nommé <code>HelloWorld.java</code>.
    </li>
</ul>

<!-- ************************************* -->
<h3><a name="1-1-execution">Exécution</a></h3>
Avant d'exécuter ce programme, on doit le <b>compiler</b> : on se place dans le répertoire contenant <code>HelloWorld.java</code> et on le compile :
<pre>javac HelloWorld.java</pre>
Cette opération produit un nouveau fichier, <code>HelloWorld.class</code>, qui est exécutable.
<br>On peut maintenant l'exécuter :
<pre>java HelloWorld</pre>

Bien noter qu'on utilise un premier outil (<code>javac</code>) pour compiler un fichier, et qu'on utilise un autre outil (<code>java</code>) pour exécuter une classe (et non pas un fichier).


<!-- ********************************************************************************* -->
<h2><a name="manipuler-des-variables">Manipuler des variables</a></h2>

Pour faire des choses plus élaborées, on va pouvoir créer des variables et leur affecter des valeurs.

<br><br>En java, toute variable qu'on utilise doit être déclarée et associée à un <b>type</b>, par exemple :
<pre>
int a;
String s;
double d;
boolean b;
</pre>

Une fois qu'une variable est déclarée, on peut lui affecter une valeur :
<pre>
a = 17;
s = "Bonjour";
b = true;
</pre>

On peut déclarer et donner une valeur initiale à une variable dans une seule instruction :
<pre>
int a = 17;
double d = 45.87;
</pre>

Les principaux types disponibles sont :

<table class="wikitable margin">
    <tr>
        <td><b>boolean</b></td>
        <td>Peut prendre 2 valeurs : <code>true</code> ou <code>false</code></td>
    </tr>
    <tr>
        <td><b>int</b></td>
        <td>Nombre entier - il existe aussi d'autres types : <code><b>byte</b></code>, <code><b>short</b></code>, <code><b>long</b></code></td>
    </tr>
    <tr>
        <td><b>double</b></td>
        <td>Nombre à virgule - il existe aussi le type <code><b>float</b></code></td>
    </tr>
    <tr>
        <td><b>String</b></td>
        <td>Représente une chaîne de caractères</td>
    </tr>
    <tr></tr>
</table>

Une fois qu'une variable est déclarée, on peut lui affecter des valeurs différentes en utilisant des <b>opérateurs</b>.

<pre>
int a = 17;
a = a + 3; // maintenant a vaut 20

String nom = "toto";
String affichage;
affichage = "Bonjour " + nom;
</pre>

Les opérateurs disponibles dépendent du type de la variable.

<table class="wikitable margin">
    <tr><th>Opérateurs</th><th>Types concernés</th><th>Commentaire</th></tr>
    <tr>
        <td>
            +
            <br>-
            <br>*
            <br>/
        </td>
        <td>Nombres</td>
        <td>
            Opérateurs arithmétiques habituels
        </td>
    </tr>
    <tr>
        <td>%</td>
        <td>Nombres entiers</td>
        <td>
            Modulo : reste de la division d'un nombre par un autre.
            <br><code>4 % 3 = 1</code>
        </td>
    </tr>
    <tr>
        <td>+</td>
        <td>String</td>
        <td>Concaténation</td>
    </tr>
</table>

A noter, deux raccourcis syntaxiques souvent utilisés :
<table class="wikitable margin">
    <tr>
        <td>++</td>
        <td><code>i++</code> signifie <code>i = i + 1</code></td>
    </tr>
    <tr>
        <td>+=</td>
        <td><code>i+=3</code> signifie <code>i = i + 3</code></td>
    </tr>
</table>

Les mêmes raccourcis existent aussi avec <code>-</code> (l'opérateur moins).


<div class="exo">
    <b>Exercice</b> : <a href="../../exos/java/declaration/Declaration.html">Déclaration, affectation</a>
</div>

<!-- ********************************************************************************* -->
<h2><a name="effectuer-des-tests">Effectuer des tests</a></h2>

Deux mots-clés du langages permettent de tester des conditions : <code>if</code> et <code>else</code>.
<pre>
if(une condition){
    faire des choses
}
else {
    faire autre chose
}
</pre>

Les conditions sont exprimées par des <b>expressions</b> ayant une valeur de type <code>boolean</code> (<b>expressions booléennes</b>).
<pre>
boolean a = true;
if(a) { ... }
</pre>

Les expressions booléennes utilisées dans les tests sont souvent le résultat d'<b>opérateurs de comparaison</b> :

<table class="wikitable margin">
    <tr>
        <td>==</td>
        <td>
            Renvoie <code>true</code> si deux variables sont égales, false sinon.
        </td>
    </tr>
    <tr>
        <td>!=</td>
        <td>
            Renvoie <code>true</code> si deux variables sont différentes, false sinon.
        </td>
    </tr>
    <tr>
        <td>
            >
            <br>>=
            <br>&lt;
            <br>&lt;=
        </td>
        <td></td>
    </tr>
</table>

<pre>
int a = 10, b = 12;
if(a == b) {
    System.out.println("a et b sont égaux");
}
else {
    System.out.println("a et b sont différents");
}
</pre>

Les instructions <code>if</code> et <code>else</code> peuvent s'enchaîner :
<pre>
int a = 10, b = 12;
if(a == b) {
    System.out.println("a et b sont égaux");
}
<b>else if</b>(a > b) {
    System.out.println("a est supérieur à b");
}
else {
    System.out.println("a est inféreieur à b");
}
</pre>

Elles peuvent aussi s'emboîter :
<pre>
int a = 10, b = 12;
if(a == b) {
    System.out.println("a et b sont égaux");
}
else {
    if(a > b){
        System.out.println("a est supérieur à b");
    }
    else {
        System.out.println("a est inféreieur à b");
    }
}
</pre>

Les conditions (expressions booléennes) peuvent être combinées avec des <b>opérateurs booléens</b>.

<table class="wikitable margin">
    <tr>
        <td>&amp;&amp;</td>
        <td>et</td>
        <td>and</td>
        <td>
            Evalué à <code>true</code> si les deux opérandes sont évaluées à <code>true</code>.
            <pre>if(12 > 10 &amp;&amp; "a" &lt; "b"){ ... }</pre> 
        </td>
    </tr>
    <tr>
        <td>||</td>
        <td>ou</td>
        <td>or</td>
        <td>
            Evalué à <code>true</code> si une des deux opérandes sont évaluées à <code>true</code>.
            <pre>if(12 > 10 || "a" > "b"){ ... }</<pre></pre>
        </td>
    </tr>
    <tr>
        <td>!</td>
        <td>négation</td>
        <td>not</td>
        <td>
            Evalué à <code>true</code> si l'opérande est évaluée à <code>false</code>.
            <pre>if(!(12 > 14)){ ... }</pre> 
        </td>
    </tr>
</table>

<div class="exo">
    <b>Exercice</b> <a href="../../exos/java/testage/Testage.html">Test de l'âge</a>
</div>

<div class="exo">
    <b>Exercice</b> <a href="../../exos/java/bissextile/Bissextile.html">Année bissextile</a>
</div>


<!-- ********************************************************************************* -->
<h2><a name="ecrire-des-boucles">Ecrire des boucles</a></h2>

On peut demander d'exécuter certaines instructions plusieurs fois.
<br>L'instruction <code>for</code> est la plus fréquemment utilisée.
<pre>
for(int i=0; i &lt; 10; i++){
    System.out.println(i);
}
</pre>

Signification :
<pre>for(initialisation; condition d'arrêt; update){ ... }</pre>
<ul>
    <li>
        Initialisation : on peut déclarer et initialiser des variables avant que la boucle commence à s'exécuter.
        <br>Noter que la <b>portée</b> des variables définies ici est limitée à la boucle
        <br><code>i</code> n'a d'existence qu'à l'intérieur de la boucle, entre { et }.
    </li>
    <li>Condition d'arrêt : expression booléenne ; la boucle va s'exécuter tant que cette condition est à <code>true</code>.</li>
    <li>Update : instruction exécutée à la fin de chaque itération.</li>
</ul>

<div class="exo">
<b>Exercice</b> : Ecrire un programme qui affiche les nombres pairs, de 2 à 20.
</div>

On peut aussi écrire des boucles de deux autres manières :

<pre>
int i = 0;
while(i &lt; 10){
    System.out.println(i);
    i++;
}
</pre>
<pre>
int i = 0;
do{
    System.out.println(i);
} while(i &lt; 10)
</pre>

Deux instructions importantes permettent de modifier le cours d'une boucle : <code>break</code> et <code>continue</code>.

<!-- ************************************* -->
<h3><a name="4-1-break">break</a></h3>
<code>break</code> permet de sortir de l'instruction qui la contient.
<pre>
for(int i = 0; i &lt; data.length; i++) {
    if (data[i] == target) {
        index = i;
        break;
    }
} // l'interpreteur arrive ici après le break
</pre>


<!-- ************************************* -->
<h3><a name="4-2-continue">continue</a></h3>
Passe à l'itération suivante de la boucle
<pre>
for(int i = 0; i &lt; data.length; i++) {
    if(data[i] == false){
        continue;
    }
    process(data[i]);
}
</pre>


<div class="exo">
    <b>Exercice</b> <a href="../../exos/java/multiples/Multiples1.html">Multiples1</a>
</div>
<div class="exo">
    <b>Exercice</b> <a href="../../exos/java/multiplication/TableMultiplication.html">TableMultiplication</a>
</div>


<!-- ********************************************************************************* -->
<h2><a name="creer-et-appeler-des-methodes">Créer et appeler des méthodes</a></h2>
La très grande majorité du code qu'on écrit se trouve dans des méthodes (terminologie objet pour désigner une fonction).
<br>Les méthodes se trouvent à l'intérieur de classes, comme la méthode <code>main()</code> qu'on a déjà vu.
<br>Au sein d'une classe, une méthode doit avoir une <b>signature</b> unique. Voir page <a href="methodes.html">Méthodes</a>.

<br><br>Application : L'exemple HelloWorld pourrait être modifié pour déporter l'affichage dans une méthode :
<br>Voir l'exemple <a href="../../exemples/java/hello/HelloWorld2.java">HelloWorld2.java</a>
<br>Une variante pourrait passer en agrument la chaîne à afficher.
<br>Voir l'exemple <a href="../../exemples/java/hello/HelloWorld3.java">HelloWorld3.java</a>


<div class="exo">
<b>Exercice</b> : Reprendre l'exercice <a href="../../exos/java/testage/Testage.html">Test de l'âge</a> et écrivez une méthode qui effectue le test.
<br>En entrée, elle prend en paramètre un <code>int</code>.
<br>En sortie, elle renvoie un <code>boolean</code>.
</div>



<!-- ********************************************************************************* -->
<h2><a name="utiliser-des-tableaux">Utiliser des tableaux</a></h2>

Voir page <a href="tableaux.html">Tableaux</a>

<div class="exo">
<b>Exercice</b> <a href="../../exos/java/max/Max.html">Max et moyenne</a>
</div>

<div class="exo">
<b>Exercice</b> : <a href="../../exos/java/voitures/Voitures.html">Voitures</a>
</div>

<div class="exo">
<b>Exercice</b> : <a href="../../exos/java/premiers/Premiers.html">Nombres premiers</a>
</div>


<!-- ********************************************************************************* -->
<h2><a name="creer-des-objets">Créer des objets</a></h2>

<!-- ************************************* -->
<h3><a name="7-1-membres-de-classe">Membres de classe</a></h3>

Jusqu'à présent, on a créé des classes qui ne contenaient que des <b>méthodes de classe</b> (déclarées <code>static</code>).
<br>Travailler uniquement avec des méthodes <code>static</code> revient finalement à programmer de manière classique (impératif non-objet), et les classes fournissent juste un moyen commode de "ranger" les méthodes.

<pre>
class HelloWorld2 {
    
    public <b>static</b> void main(String[] args) {
        echo();
    }
    
    public <b>static</b> void echo() {
        System.out.println("Hello World!");
    }
    
}
</pre>
Ici, <code>main()</code> ou <code>echo()</code> sont des méthodes static de la classe <code>HelloWorld2</code>.
<br>Pour les appeler depuis l'extérieur de la classe, on utilise le nom de la classe, suivi d'un point, suivi de l'appel de la méthode :
<pre>
class TestHelloWorld2() {
    public static void main(String[] args) {
        <b>HelloWorld2.echo()</b>;
    }
}
</pre>

<!-- ************************************* -->
<h3><a name="7-2-variable-de-classe">Variable de classe</a></h3>
De la même manière qu'une classe peut avoir des méthodes, elle peut aussi avoir des variables :

<pre>
class HelloWorld2 {
    
    <b>public static uneVariable = 4;</b>

    <b>public static uneAutreVariable;</b>

    public static void main(String[] args) {
        echo();
    }
    
    public static void echo() {
        System.out.println("Hello World!");
    }
    
}

class TestHelloWorld2() {
    public static void main(String[] args) {
        HelloWorld2.echo();
        <b>System.out.println(HelloWorld2.uneVariable);</b>
    }
}
</pre>

Les méthodes et les variables d'une classe sont appelés les <b>membres</b> de la classe.

<!-- ************************************* -->
<h3><a name="7-3-objets">Objets</a></h3>

Une classe peut aussi être vue comme un patron, une template pour créer des <b>objets</b> de cette classe :

<pre>
public class Chat {
    
    // variables non static
    // Ont une valeur différente pour chaque objet
    <b>private String nom</b>;
    <b>private int age</b>;
    
    // constructeur
    public Chat(String nom, int age) {
        this.nom = nom;
        this.age = age;
    }
    
    // Méthode non static
    // A un résultat différent pour chaque objet
    <b>public String direBonjour()</b> {
        return "Bonjour, je m'appelle " + this.nom + ", j'ai " + this.age + " ans";
    }
}
</pre>

<br>Les membres non static de la classe sont les <b>variables et méthodes d'instance</b>, qui vont dépendre d'un chat en particulier.
<br>La valeur des variables d'instance constituent l'<b>état</b> d'un objet.
<br>Les méthodes d'instance définissent le <b>comportement</b> de l'objet.

<br><br>On peut affecter une valeur initiale aux variables de classe ou d'instance.
<pre>
public class Chat {
    <b>private String nom = "?"</b>;
}
</pre>
Les variables de classe ou d'instance qui n'ont pas encore reçu de valeur ont une valeur par défaut ("" pour String, 0 pour les nombres...).

<br><br>A noter: une classe peut à la fois avoir des membres d'instance (non <code>static</code>) et d'instance (<code>static</code>).

<!-- ************************************* -->
<h3><a name="7-4-constructeur-mot-cle-new">Constructeur, mot-clé new</a></h3>

Pour créer un nouveau chat, on introduit une méthode particulière, un <b>constructeur</b>. C'est une méthode qui a exactement le même nom que la classe qui le contient.

<br><br>Pour créer un chat, on utilise le mot-clé <b>new</b> :

<pre>
public class TestChat {
    public static void main(String[] args) {
        <b>Chat minou = new Chat("Minou", 3)</b>;
    }
}
</pre>

On dit qu'on a <b>instancié</b> la classe <code>Chat</code>.
<br>La variable <code>minou</code> représente une <b>instance</b> de la classe <code>Chat</code>.

<br><br>Une classe peut avoir plusieurs constructeurs, qui diffèrent par leurs paramètres.

<pre>
public class Chat {
    private String nom;
    private int age;
    
    public Chat(String nom, int age) {
        this.nom = nom;
        this.age = age;
    }
    
    // en utilisant ce constructeur, l'âge n'est pas initialisé,
    // this.age = 0 (valeur par défaut)
    public Chat(String nom) {
        this.nom = nom;
    }
}
</pre>

A l'utilisation :
<pre>
Chat c1 = new Chat("chat 1", 2);
Chat c2 = new Chat("chat 2");
</pre>
Le compilateur peut déterminer quel constructeur appeler, en se basant sur les paramètres utilisés.

<!-- ************************************* -->
<h3><a name="7-5-mot-cle-this">Mot-clé this</a></h3>
Lorsqu'on se trouve dans le code de la classe, à l'intérieur d'une méthode d'instance (non <code>static</code>), on peut désigner l'objet courant en utilisant le mot-clé <b>this</b>.

<br><br>L'emploi de ce mot-clé est optionnel, sauf pour résoudre une ambiguïté :
<pre>
    // constructeur
    public Chat(String nom, int age) {
        <b>this.nom = nom;
        this.age = age;</b>
    }
</pre>
Ici, le compilateur doit pouvoir faire la différence entre la variable locale passée en paramètre, <code>nom</code>, et la variable d'instance <code>nom</code>. Donc ici, <code>this</code> est obligatoire.

<br><br>Mais on aurait pu écrire aussi :
<pre>
    // constructeur
    public Chat(String nomDuChat, int ageDuChat) {
        <b>nom = nomDuChat;
        age = ageDuChat;</b>
    }
</pre>
Ici, pas d'ambiguïté donc <code>this</code> est facultatif, on peut écrire indifféremment <code>nom</code> ou <code>this.nom</code> pour référer à la variable d'instance <code>nom</code>.

<!-- ************************************* -->
<h3><a name="7-6-visibilite">Visibilité</a></h3>

On peut décider de la <b>visibilité</b> des membres d'une classe, en les déclarant (entre autres) <code>public</code> ou <code>private</code>.
<ul>
    <li><code>public</code> : le membre est accessible depuis les autres classes.</li>
    <li><code>private</code> : le membre n'est accessible que depuis l'intérieur de la classe où il est déclaré.</li>
</ul>

La possibilité de rendre privés les membres d'une classe s'appelle l'<b>encapsulation</b> (voir <a href="../oop/intro-poo.html#5-visibilite">cette page</a>).

<br><br>Dans la classe <code>Chat</code>, les variables d'instance <code>nom</code> et <code>age</code> ont été déclarées <code>private</code>, donc on ne peut pas les utiliser à l'extérieur :
<pre>
public class TestChat {
    public static void main(String[] args) {
        Chat minou = new Chat("Minou", 3);
        // === NON : la ligne suivante génère une erreur de compilation ===
        <b>System.out.println(minou.nom);</b>
    }
}
</pre>

On souvent intérêt à réduire le plus possible la visibilité des membres d'une classe.
<br>Par exemple pour la classe <code>Chat</code>, si l'âge était public, on pourrait écrire :

<pre>
public class Chat {
    // ...
    public int age;
    // ...
}

public class TestChat {
    public static void main(String[] args) {
        Chat minou = new Chat("Minou", 3);
        <b>minou.age = -3;</b>
    }
}
</pre>

Déclarer que l'âge est privé permet de contrôler la cohérence de l'état d'un objet.

<!-- ************************************* -->
<h3><a name="7-7-getters-setters">Getters, setters</a></h3>

Afin de garder privées les variables d'une classe tout en permettant d'y accéder, on définit souvent des méthodes pour les lire (<i>getter</i>) et les modifier (<i>setter</i>).
<pre>
public class Chat {
    
    private int age;
    
    <b>public int getAge()</b> {
        return age;
    }
    
    <b>public void setAge(int age)</b> {
        if(age &lt; 0) {
            // Envoyer une exception
        }
        this.age = age;
    }
}
</pre>

<div class="exo">
<b>Exercice</b> : <a href="../../exos/java/personnes/Personnes.html">Personnes</a>
</div>


<!-- ********************************************************************************* -->
<h2><a name="travailler-avec-des-packages">Travailler avec des packages</a></h2>
Voir <a href="packages.html">page "Packages, application java</a>


</article>

</body>
</html>
