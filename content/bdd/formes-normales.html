<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>Formes normales | BDD CNAM 2ISA Millau</title>
    <link rel="icon" type="image/png" href="../../static/favicon.jpg">
    <link href="../../static/cnam-2isa.css" rel="stylesheet" type="text/css">
    <meta name="description" content="">
    <meta name="robots" content="index,follow">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.rights" content="Creative commons by-sa 4.0">
    <meta name="dcterms.rightsHolder" content="Thierry Graff">
    <meta name="dcterms.dateCopyrighted" content="2025">
    <style>
        .jointures td:nth-child(1){font-weight:bold; font-size:1.2rem;}
    </style>
</head>

<body>

<nav class="prevnext">
    <a class="top" href="index.html">&uarr;</a>
    <!--
    <a class="prev" rel="prev" href="../index.html">&larr;</a>
    <a class="next" rel="next" href=".html">&rarr;</a>
    -->
</nav>

<!-- 
https://vladimirzdrazil.com/til/databases/relational-database-normal-forms-mnemonic/
-->

<header>
<h1>Formes normales</h1>
<div class="intro">
    &laquo; <b><i>the Truth, the whole Truth, and nothing but the Truth, so help me God</i></b> &raquo; 
    <br>Cette phrase à prononcer lorsqu'on témoigne devant un tribunal anglophone a été détournée en
    <br>&laquo; <b><i>the key, the whole key, nothing but the key so <a href="https://fr.wikipedia.org/wiki/Edgar_Frank_Codd">help me Codd</a></i></b> &raquo;.
    <br>Plus précisément : &laquo; <b><i>Chaque attribut ne faisant pas partie de la clé doit fournir une information à propos de la clé, toute la clé, rien que la clé</i></b> &raquo;
    <ul class="margin0">
        <li>1NF : la clé</li>
        <li>2NF : toute la clé</li>
        <li>3NF : rien que la clé</li>
    </ul>
</div>

<nav class="pagetoc">
    <ul>
        <li>
            <a href="#1-1nf-1ere-forme-normale">1NF - 1ère forme normale</a>
        </li>
        <li>
            <a href="#2-2nf-2eme-forme-normale">2NF - 2ème forme normale</a>
        </li>
        <li>
            <a href="#3-3nf-3eme-forme-normale">3NF - 3ème forme normale</a>
        </li>
    </ul>
</nav>
</header>

<main>
<article>

<!-- ********************************************************************************* -->
<h2 id="1-1nf-1ere-forme-normale">1NF - 1ère forme normale</h2>
<ul class="spaced">
    <li>
        <b>Unicité des lignes</b>, donc chaque ligne doit avoir un identifiant unique (la clé).
    </li>
    <li>
        <b>Ordre des lignes indifférent</b>, en lecture comme en écriture.
    </li>
    <li>
        <b>Atomicité</b> : chaque attribut (cellule) doit contenir des valeurs indivisibles.
        <br>Les valeurs doivent correspondre à un type donné.
    </li>
    <li>
        <b>Pas de duplication de l'information</b>
    </li>
</ul>

Exemple : base permettant de gérer les notes des étudiants.

<br><br>Table <code>notes</code>.
<table class="wikitable margin">
    <tr><th>id</th><th>eleve</th><th>matiere</th><th>notes</th></tr>
    <tr>
        <td>1</td>
        <td>Jean Martin</td>
        <td>Français</td>
        <td>12, 14</td>
    </tr>
    <tr>
        <td>2</td>
        <td>Jean Martin</td>
        <td>Maths</td>
        <td>18, 16</td>
    </tr>
    <tr>
        <td>3</td>
        <td>Jeanne Dupont</td>
        <td>Français</td>
        <td>16, 15</td>
    </tr>
</table>

<b>Premier problème</b> : la colonne <code>notes</code> contient des valeurs non atomiques.
<br>Pose problème par exemple pour lister les étudiants ayant eu plus de 15 en français.
<br>A modifier de cette manière :
<table class="wikitable margin">
    <tr><th>id</th><th>eleve</th><th>matiere</th><th>note</th></tr>
    <tr>
        <td>1</td>
        <td>Jean Martin</td>
        <td>Français</td>
        <td>12</td>
    </tr>
    <tr>
        <td>2</td>
        <td>Jean Martin</td>
        <td>Français</td>
        <td>14</td>
    </tr>
    <tr>
        <td>3</td>
        <td>Jean Martin</td>
        <td>Maths</td>
        <td>18</td>
    </tr>
    <tr>
        <td>4</td>
        <td>Jean Martin</td>
        <td>Maths</td>
        <td>16</td>
    </tr>
    <tr>
        <td>5</td>
        <td>Jeanne Dupont</td>
        <td>Français</td>
        <td>16</td>
    </tr>
    <tr>
        <td>6</td>
        <td>Jeanne Dupont</td>
        <td>Français</td>
        <td>15</td>
    </tr>
</table>

<b>Deuxième problème</b> : les noms des étudiants et des matières sont dupliqués dans plusieurs cellules.
<br>Si on veut par exemple modifier un nom, il faut le modifier à plusieurs endroits.
<br>A modifier de cette manière :
<br>

<div class="float-left margin">
    Table <code>notes</code>
    <table class="wikitable">
        <tr><th>id</th><th>id_etudiant</th><th>id_matiere</th><th>note</th></tr>
        <tr>
            <td>1</td>
            <td>1</td>
            <td>1</td>
            <td>12</td>
        </tr>
        <tr>
            <td>2</td>
            <td>1</td>
            <td>1</td>
            <td>12</td>
        </tr>
        <tr>
            <td>3</td>
            <td>1</td>
            <td>2</td>
            <td>18</td>
        </tr>
        <tr>
            <td>4</td>
            <td>1</td>
            <td>2</td>
            <td>16</td>
        </tr>
        <tr>
            <td>5</td>
            <td>2</td>
            <td>1</td>
            <td>16</td>
        </tr>
        <tr>
            <td>6</td>
            <td>2</td>
            <td>1</td>
            <td>15</td>
        </tr>
    </table>
</div>

<div class="float-left margin">
    Table <code>matieres</code>
    <table class="wikitable">
        <tr><th>id</th><th>nom</th></tr>
        <tr>
            <td>1</td>
            <td>Français</td>
        </tr>
        <tr>
            <td>2</td>
            <td>Maths</td>
        </tr>
    </table>
</div>

<div class="float-left margin">
    Table <code>eleves</code>
    <table class="wikitable">
        <tr><th>id</th><th>nom</th><th>prenom</th></tr>
        <tr>
            <td>1</td>
            <td>Martin</td>
            <td>Jean</td>
        </tr>
        <tr>
            <td>2</td>
            <td>Martin</td>
            <td>Jeanne</td>
        </tr>
    </table>
</div>

<br class="clear-left">

<!-- ********************************************************************************* -->
<h2 id="2-2nf-2eme-forme-normale">2NF - 2ème forme normale</h2>
<b>1NF + pas de dépendance partielle</b>.
<br>Concerne des tables dont la clé primaire (ou identifiant) est une combinaison de plusieurs colonnes.
<br>On distingue:
<ul class="margin0">
    <li>les attributs faisant partie de l'identifiant</li>
    <li>les attributs ne faisant pas partie de l'identifiant</li>
</ul>
La 2NF peut s'exprimer par : <b>tout attribut ne faisant pas partie de l'identifiant doit dépendre de l'<i>intégralité</i> de l'identifiant</b>.
<br>Par exemple, pour modéliser cette situation :
<ul>
    <li>Un étudiant peut suivre 0 ou plusieurs cours</li>
    <li>Un cours se déroule toujours dans la même salle</li>
</ul>
Comme on a un lien de plusieurs à plusieurs entre les étudiants et les cours, on a une table de liaison.
<br>Donc si on a cette table : 

<table class="wikitable margin">
    <tr><th>id_etudiant</th><th>id_cours</th><th>salle</th></tr>
    <tr>
        <td>1</td>
        <td>1</td>
        <td>A</td>
    </tr>
    <tr>
        <td>1</td>
        <td>2</td>
        <td>B</td>
    </tr>
</table>

La clé est ici une combinaison de <code>id_etudiant</code> et <code>id_cours</code>.
<br>Mais la salle ne dépend que du cours, donc d'une partie de l'identifiant.
<br>Il faut alors introduire une table supplémentaire :
<br>
<div class="float-left margin">
    Table <code>cours</code>
    <table class="wikitable">
        <tr><th>id_cours</th><th>salle</th></tr>
        <tr>
            <td>1</td>
            <td>A</td>
        </tr>
        <tr>
            <td>2</td>
            <td>B</td>
        </tr>
    </table>
</div>

<div class="float-left margin">
    Table de liaison
    <table class="wikitable">
        <tr><th>id_etudiant</th><th>id_cours</th></tr>
        <tr>
            <td>1</td>
            <td>1</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
        </tr>
    </table>
</div>

<br class="clear-left">

<!-- ********************************************************************************* -->
<h2 id="3-3nf-3eme-forme-normale">3NF - 3ème forme normale</h2>
<b>2NF + pas de dépendance transitive par l'intermédiaire d'attributs non identifiants</b>
<br>Comme pour la 2NF, on distingue:
<ul class="margin-top0">
    <li>les attributs faisant partie de l'identifiant</li>
    <li>les attributs ne faisant pas partie de l'identifiant</li>
</ul>
La 3NF peut s'exprimer ainsi : <b>Un attribut non identifiant ne dépend pas d’un ou plusieurs attributs ne participant pas à l'identifiant</b>.
<br>Ou encore : <b>Tous les attributs non identifiants doivent dépendre <i>directement</i> de l'identifiant</b>.

<br><br>Exemple : Table qui liste des avions

<table class="wikitable margin">
    <tr><th>id_avion</th><th>constructeur</th><th>modele</th><th>capacite</th><th>proprietaire</th></tr>
    <tr>
        <td>1</td>
        <td>Airbus</td>
        <td>A380</td>
        <td>180</td>
        <td>Air France</td>
    </tr>
    <tr>
        <td>2</td>
        <td>Boeing</td>
        <td>B747</td>
        <td>314</td>
        <td>British Airways</td>
    </tr>
</table>

Ici, l'identifiant est <code>id_avion</code>.
<br>Sachant que la capacité d'un avion et son constructeur dépendent de son modèle, cette table ne respecte pas la 3NF à deux reprises :
<ul class="margin-top0">
    <li><code>constructeur</code> dépend de <code>modele</code>, qui ne fait pas partie de l'identifiant</li>
    <li><code>capacite</code> dépend de <code>modele</code>, qui ne fait pas partie de l'identifiant</li>
</ul>

(cf "rien que la clé" : ici, <code>constructeur</code> et <code>capacite</code> fournissent des informations sur <code>modele</code>, qui ne fait pas partie de la clé).

<br><br>Pour respecter la 3NF, il faudrait :

<br>
<div class="float-left margin">
    <table class="wikitable">
        <tr><th>id_avion</th><th>modele</th><th>proprietaire</th></tr>
        <tr>
            <td>1</td>
            <td>A380</td>
            <td>Air France</td>
        </tr>
        <tr>
            <td>2</td>
            <td>B747</td>
            <td>British Airways</td>
        </tr>
    </table>
</div>

<div class="float-left margin">
    <table class="wikitable">
        <tr><th>modele</th><th>constructeur</th><th>capacite</th></tr>
        <tr>
            <td>A380</td>
            <td>Airbus</td>
            <td>180</td>
        </tr>
        <tr>
            <td>B747</td>
            <td>Boeing</td>
            <td>314</td>
        </tr>
    </table>
</div>

<br class="clear-left">

Rappel : une relation est dit <i>transitive</i> si <code>A est en relation avec B et B est en relation avec C => A est en relation avec C</code>.
<br>Exemple : la relation "est inférieur à" est transitive : <code>A &lt; B et B &lt; C => A &lt; C</code>

<br><br>On parle de "dépendance transitive" par le biais de la relation "dépend de" :
<br><code>capacite</code> dépend de <code>modele</code> et <code>modele</code> dépend de <code>id_avion</code>.
<br>Donc <code>capacite</code> dépend de <code>id_avion</code> par le biais de <code>modele</code>, c'est à dire par transitivité.

</article>
</main>

</body>
</html>
