<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>Monades | CNAM 2ISA Millau</title>
    <meta name="description" content="Exercices de mathématiques">
    <meta name="robots" content="index,follow">
    <link href="../../static/cnam-2isa.css" rel="stylesheet" type="text/css">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.rights" content="Creative commons by-sa 4.0">
    <meta name="dcterms.rightsHolder" content="Thierry Graff">
    <meta name="dcterms.dateCopyrighted" content="2021">
</head>

<body>

<nav class="prevnext">
    <a class="top" title="CNAM 2ISA Millau" href="../../index.html">&uarr;</a>    
    <!-- 
    <a class="prev" title="Previous" href=".html">&larr;</a>
    <a class="next" title="Next" href=".html">&rarr;</a>
    -->
</nav>

<header>
<h1>
    Monades
    <br>(brouillon)
</h1>
</header>

<article>
<nav class="toc">
    <ul>
        <li>
            <a href="#definition">Définition</a>
            <ul>
                <li><a href="#1-1-categorie-de-kleisli">Catégorie de Kleisli</a></li>
                <li><a href="#1-2-le-constructeur-de-type-monadique">Le constructeur de type monadique</a></li>
                <li><a href="#1-3-la-fonction-return">La fonction return</a></li>
                <li><a href="#1-4-la-fonction-bind">La fonction bind</a></li>
            </ul>
        </li>
        <li>
            <a href="#from-old">FROM OLD</a>
        </li>
        <li>
            <a href="#liens">Liens</a>
        </li>
    </ul>
</nav>



<style>
code{font-size:1.3rem;}
</style>

<!-- ********************************************************************************* -->
<h2 id="definition">Définition</h2>

D'après <a href="https://fr.wikipedia.org/wiki/Monade_(informatique)">Wikipedia</a> :

<br><br>Une monade peut se voir comme la donnée d'un triplet constitué des trois éléments suivants&nbsp;:

<ul class="spaced margin border">
    <li class="padding-top">
        un constructeur de type appelé type monadique, qui associe au type <code>t</code> le type <code>Mt</code>.
    </li>
    <li>
        une fonction nommée <i>unit</i> ou <i>return</i>, qui construit à partir d'un élément de type sous-jacent <code>a</code> un autre objet de type monadique <code>Ma</code>.
        <br>Cette fonction est alors de signature <code>return: t &rarr; Mt</code>
    </li>
    <li>
        une fonction <i>bind</i>, représentée par l'opérateur <code>&#8811;=</code>, associant à un type monadique et une fonction d'association un autre type monadique. Il permet de composer une fonction monadique à partir d'autres fonctions monadiques. Cet opérateur est de type
        <br><code>&#8811;=: Mt &rarr; (t &rarr; Mu) &rarr; Mu</code>
        <br>Traduction : l'opérateur <code>&#8811;=</code> prend en paramètre Mt et <code>(t &rarr; Mu)</code> et renvoie <code>Mu</code>
    </li>
</ul>

Du point de vue des catégories, une monade est constituée
<br>d'un <b>foncteur</b>, <i>t &rarr; Mt</i> constructeur de type appelé type monadique
<br>et de 2 <b>transformations naturelles</b>, <i>return</i> et <i>bind</i>.

<br><br>On appelle <b>Monade</b> un triplet (<i>t &rarr; Mt</i>, <i>return</i>, <i>bind</i>).

<!-- ************************************* -->
<h3 id="1-1-categorie-de-kleisli">Catégorie de Kleisli</h3>
La catégorie des <b>fonctions monadiques</b> est appelée <b>catégorie de Kleisli</b>.
<br>Une fonction monadique est une fonction qui renvoie un type monadique.

<br><div class="todo">TODO verif définition - https://en.wikipedia.org/wiki/Monad_(functional_programming)</div>

<br>Dans cette catégorie,
<ul class="spaced bold margin-top05">
    <li>La flèche identité est la fonction <i>unit</i>.</li>
    <li>L'opérateur de composition est la fonction <i>bind</i>.</li>
</ul>

<!-- ************************************* -->
<h3 id="1-2-le-constructeur-de-type-monadique">Le constructeur de type monadique</h3>

Voir <a href="categories.html">la page sur les catégories</a>, un constructeur est bien un <b>foncteur</b>.

<img class="margin padding border" src="img/mon-construct.svg" alt="Monade transformée par un constructeur de type monadique">

<div class="question">Constructeur pour chaque type de la cat de départ ? pas un constructeur au sens habituel où un seul type est construit ?</div>


<!-- ************************************* -->
<h3 id="1-3-la-fonction">La fonction return</h3>

<!-- ************************************* -->
<h3 id="1-4-la-fonction">La fonction bind</h3>

<div class="">
    Notation  Haskell :
    <br><code>&#8811;=: Mt &rarr; (t &rarr; Mu) &rarr; Mu</code>
    <br>Avec notre manière habituelle d'écrire les fonctions :
    <div class="margin-left2"><code>&#8811;=( Mt, (t &rarr; Mu) ) = Mu</code></div>
    
    Soit:
    <div class="margin-left2"><code>&#8811;=</code></div>
    prend en paramètres :
    <div class="margin-left5"><code>Mt</code></div>
    <div class="margin-left5"><code>(t &rarr; Mu)</code></div>
    et renvoie
    <div class="margin-left5"><code>Mu</code></div>
</div>

<!-- ********************************************************************************* -->
<h2 id="from-old">FROM OLD</h2>

<br><br>Dans un langage fonctionnel pur, les effets de bords sont "emprisonnées" dans des <b>monades</b>.


<br><br>Prenons deux fonctions pures, <code>f</code> et <code>g</code>, qui transforment un <code>float</code> en <code>float</code>.
<pre>
    f : float -> float
    g : float -> float
</pre>

Pour débugger, on voudrait que chaque fonction, en plus de renvoyer un <code>float</code>, renvoie aussi un message.
<br>Si on ne peut pas afficher à l'écran ou remplir un log global, on peut toujours construire deux fonctions qui renvoient un message (<code>string</code>) en plus d'un <code>float</code> :
<pre>
    f' : float -> (float, string)
    g' : float -> (float, string)
</pre>
<pre>
    f'(x) = (f(x), "f a été appelée")
</pre>

On voudrait en plus continuer à pouvoir <b>composer</b> nos fonctions.
<br>Avec <code>f</code> et <code>g</code>, pas de problème:

<pre>
    x --f--> y = f(x) --g--> z = g(y) = g(f(x)) = g o f (x)
    |        |               |
  float    float           float
</pre>

Avec <code>f'</code> et <code>g'</code>, on peut le faire aussi, en définissant par exemple:

<pre>g'(f'(x)) = ( g(f(x)), "message de f" + "message de g" )</pre>

<pre>
    (x, "")
      |
      f'
      |
      y = (f(x), "message de f")
      |
      g'
      |
      z = (g(y), "message de g")
        = (g( (f(x), "message de f") ), "message de g")
        = ( g(f(x)), "message de f" + "message de g" )
</pre>

On réussit à composer <code>f'</code> et <code>g'</code>, mais ça n'est pas pratique car chaque fois qu'on utilise <code>f'</code> ou <code>g'</code>, on doit se préoccuper de la concaténation des messages.



<!-- ********************************************************************************* -->
<h2 id="liens">Liens</h2>


<ul>
    <li><a href="https://fr.wikipedia.org/wiki/Monade_(informatique)">fr.wikipedia.org</a></li>
    <li><a href="http://www.valuedlessons.com/2008/01/monads-in-python-with-nice-syntax.html">www.valuedlessons.com/monads-in-python-with-nice-syntax</a></li>
    <li><a href="https://www.atikteam.com/fr/blog/page/Les-Monades-Dans-La-Programmation-Fonctionnelle">www.atikteam.com/Les-Monades-Dans-La-Programmation-Fonctionnelle</a></li>
    <li><a href="https://www.atikteam.com/fr/blog/page/Programmation-Fonctionnelle-et-Theorie-des-Categories">www.atikteam.com/Programmation-Fonctionnelle-et-Theorie-des-Categories</a></li>
    <li>you-could-have-invented-monads.html</li>
</ul>
    

</article>

</body>
</html>
