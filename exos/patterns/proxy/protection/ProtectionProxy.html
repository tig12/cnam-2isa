<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>Exercice Protection Proxy | NFP121</title>
    <link href="../../../../static/cnam-2isa.css" rel="stylesheet" type="text/css">
    
</head>
<body>

<header>
<h1>Exercice : Protection Proxy</h1>
</header>

<main>
<article>

<a href="enonce">Code source de l'énoncé</a>

<ol class="spaced">
    <li>
Compilez le code de l'énoncé.
Exécutez le avec les différentes valeurs possibles d'argument (ROOT, ADMIN, USER).
<br>Vous pouvez constater que la classe <code>Sensible</code> n'est pas du tout protégée.
    </li>
    
    <li>
Implémentez la classe <code>Proxy</code> permettant de filtrer les utilisations de <code>Sensible</code>.
<br>Dans <code>main()</code>, remplacez
<pre>
Sensible sensible = new Sensible();
</pre>
par :
<pre>
Proxy sensible = new Proxy();
</pre>

Les appels avec les différentes valeurs de l'argument doivent donner :

<pre>
java TestProtectionProxy ROOT

rootMethod called with role ROOT
adminMethod called with role ROOT
userMethod called with role ROOT
</pre>

<pre>
java TestProtectionProxy ADMIN

rootMethod : Acces denied
adminMethod called with role ADMIN
userMethod called with role ADMIN
</pre>

<pre>
java TestProtectionProxy USER

rootMethod : Acces denied
adminMethod : Acces denied
userMethod called with role USER
</pre>
    </li>
    
    <li>
Dans le code précédent, l'utilisation de <code>Proxy</code> permet effectivement de protéger l'accès à la classe <code>Sensible</code>.
<br>Complétez le code en introduisant une interface <code>ISensible</code> de manière à fournir une implémentation fidèle du pattern.
<br>Et remplacez dans le code
<pre>
Proxy sensible = new Proxy();
</pre>
par
<pre>
ISensible sensible = new Proxy();
</pre>
    </li>
    
    <li>
    (Dépasse le cadre du pattern)
    <br>L'implémentation précédente permet toujours d'écrire du code appelant directement la classe <code>Sensible</code>.
    <br>Comment pourrait-on bloquer toute utilisation directe de cette classe ?
    </li>
    
</ol>

</article>
</main>

</body>
</html>

